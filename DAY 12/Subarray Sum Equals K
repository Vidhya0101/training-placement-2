from collections import defaultdict
def subarraySum(nums, k):
    m = defaultdict(int)
    m[0] = 1
    cur = res = 0
    for n in nums:
        cur += n
        res += m[cur - k]
        m[cur] += 1
    return res
