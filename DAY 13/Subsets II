def subsetsWithDup(nums):
    nums.sort()
    res = []
    def backtrack(i, path):
        res.append(path)
        for j in range(i, len(nums)):
            if j > i and nums[j] == nums[j - 1]:
                continue
            backtrack(j + 1, path + [nums[j]])
    backtrack(0, [])
    return res
